(this["webpackJsonptodo-react"]=this["webpackJsonptodo-react"]||[]).push([[0],{122:function(t,e,n){t.exports=n.p+"static/media/wood-pattern.6d5e7efa.jpg"},127:function(t,e,n){t.exports=n(203)},202:function(t,e,n){},203:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"fetchTodosEpic",(function(){return z})),n.d(r,"createTodoEpic",(function(){return M})),n.d(r,"updateTodoEpic",(function(){return W})),n.d(r,"removeTodosEpic",(function(){return F}));var a={};n.r(a),n.d(a,"log",(function(){return Q}));var o={};n.r(o),n.d(o,"saveState",(function(){return Y})),n.d(o,"loadState",(function(){return Z}));var i={};n.r(i),n.d(i,"default",(function(){return $}));var c,u,s=n(0),l=n.n(s),d=n(62),f=n(21),p=n(76),b=n(41),O=n(20),m=n(208),h=n(26),g=n(111),v=O.d,E=n(11),j=Object(E.createAction)("SET_TODO_FOCUS")(),S=Object(E.createAsyncAction)("ADD_TODOS_REQUEST","ADD_TODOS_SUCCESS","ADD_TODOS_FAILURE")(),y=Object(E.createAsyncAction)("REMOVE_TODOS_REQUEST","REMOVE_TODOS_SUCCESS","REMOVE_TODOS_FAILURE")(),x=Object(E.createAsyncAction)("LOAD_TODOS_REQUEST","LOAD_TODOS_SUCCESS","LOAD_TODOS_FAILURE")(),w=Object(E.createAsyncAction)("SAVE_TODO_REQUEST","SAVE_TODO_SUCCESS","SAVE_TODO_FAILURE")(),_=(Object(E.createAsyncAction)("SAVE_TODOS_REQUEST","SAVE_TODOS_SUCCESS","SAVE_TODOS_FAILURE")(),Object(E.createReducer)(!1).handleAction([x.request,S.request,y.request,w.request],(function(t,e){return!0})).handleAction([x.success,x.failure,S.failure,S.success,y.success,y.failure,w.failure,w.success],(function(t,e){return!1}))),A=Object(E.createReducer)({total:0,data:[]}).handleAction(x.success,(function(t,e){return e.payload})),T=Object(E.createReducer)({}).handleAction([y.request],(function(t,e){return e.payload})).handleAction([y.success,y.failure],(function(t,e){return null})),D=Object(E.createReducer)(-1).handleAction(j,(function(t,e){return e.payload})),k=Object(O.c)({isLoading:_,removingId:T,focusedId:D,todos:A}),C=function(t){return Object(O.c)({router:Object(b.b)(t),todos:k})},L=n(124),I=n(209),R=n(73),N=n(205),U=n(206),P=n(69),V=n(207),B=n(114),q=function(t,e){return function(n,r,a){var o=a.todoApi;return n.pipe(Object(N.a)(Object(E.isActionOf)(t.request)),Object(U.a)((function(n){var r=n.payload;return Object(R.a)(o("local")[e](r)).pipe(Object(P.a)(t.success),Object(V.a)(t.failure))})),Object(U.a)((function(){return Object(B.iif)((function(){return"find"!==e}),Object(R.a)(o("local").find(r.value.router.location)).pipe(Object(P.a)(x.success),Object(V.a)(x.failure)))})))}},z=(c=x,u="find",function(t,e,n){var r=n.todoApi;return t.pipe(Object(N.a)(Object(E.isActionOf)(c.request)),Object(U.a)((function(t){return t.payload,Object(R.a)(r("local")[u](e.value.router.location)).pipe(Object(P.a)(c.success),Object(V.a)(c.failure))})))}),M=q(S,"create"),W=q(w,"update"),F=q(y,"delete"),J=I.a.apply(void 0,Object(L.a)(Object.values(r))),Q=console.log,H=Object({NODE_ENV:"production",PUBLIC_URL:"/YetYetReact/build"}).APP_VERSION,K="__SERIALIZED_STATE_TREE_v".concat(H,"__");function Y(t){if(!localStorage)return!1;try{var e=JSON.stringify(t);return localStorage.setItem(K,e),!0}catch(n){throw new Error("store serialization failed")}}function Z(){if(localStorage)try{var t=localStorage.getItem(K);if(null==t)return;return JSON.parse(t)}catch(e){throw new Error("store deserialization failed")}}var G=n(90),X=n(123);G.a.use(X.a).init({fallbackLng:"en",debug:!0});var $=G.a,tt=n(8),et=n.n(tt),nt=n(25),rt=n(72),at=n(120),ot=n(54),it=n.n(ot),ct=function(){return new Promise((function(t){setTimeout(t,Math.round(2e3*Math.random()))}))},ut=new(function(){function t(){var e=this;Object(rt.a)(this,t),this.type="local",this.db=this.serialize(),this.find=function(){var t=Object(nt.a)(et.a.mark((function t(n){var r,a,o,i,c,u,s,l,d,f,p;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.search,a=void 0===r?"":r,o=it.a.parse(a.replace("?","")),i=o.sort,c=void 0===i?"desc":i,u=o.filter,s=o.limit,l=o.offset,d=e.db,f=function(){return{total:e.db.length,data:d.slice(parseInt(l),parseInt(l)+parseInt(s)||10)}},"desc"===c&&(d=d.sort((function(t,e){return e.id-t.id}))),"asc"===c&&(d=d.sort((function(t,e){return t.id-e.id}))),!u){t.next=10;break}return p=function(t){return t.toLowerCase()},d=d.filter((function(t){return p(t.title).includes(p(u))})).sort((function(t,e){return p(t.title).indexOf(u)-p(e.title).indexOf(u)})),t.abrupt("return",f());case 10:return t.abrupt("return",f());case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.create=function(){var t=Object(nt.a)(et.a.mark((function t(n){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.db.push({id:(new Date).getTime(),title:n}),e.commit(),t.next=4,ct();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.update=function(){var t=Object(nt.a)(et.a.mark((function t(n){var r,a;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,a=n.title,e.db.find((function(t){return t.id===r})).title=a,e.commit(),t.next=6,ct();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.delete=function(){var t=Object(nt.a)(et.a.mark((function t(n){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.db=e.db.filter((function(t){return t.id!==n})),e.commit(),t.next=4,ct();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.db=this.serialize()}return Object(at.a)(t,[{key:"serialize",value:function(){return JSON.parse(localStorage.getItem("__TODOS__")||"[]")}},{key:"commit",value:function(){localStorage.setItem("__TODOS__",JSON.stringify(this.db)),this.db=this.serialize()}}]),t}()),st=new function t(){Object(rt.a)(this,t),this.type="firebase",this.find=function(){var t=Object(nt.a)(et.a.mark((function t(e){var n;return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.search,void 0===n?"":n;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.create=function(){var t=Object(nt.a)(et.a.mark((function t(e){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.update=function(){var t=Object(nt.a)(et.a.mark((function t(e,n){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.delete=function(){var t=Object(nt.a)(et.a.mark((function t(e){return et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},lt={logger:a,localStorage:o,i18n:i,todoApi:function(t){return[ut,st].find((function(e){return e.type===t}))||ut}},dt=Object(h.a)(),ft=Object(m.a)({dependencies:lt}),pt=[ft,Object(g.a)(dt)],bt=v(O.a.apply(void 0,pt)),Ot=Object(O.e)(C(dt),{},bt);ft.run(J);var mt,ht=Ot,gt=n(46),vt=n(121),Et=n(9),jt=n(33),St=Object(jt.a)((function(t){return{title:{width:"100%",fontSize:26,padding:16,margin:1,font:"400 26px system-ui"},input:{maxWidth:"calc(100% - 18px)",minWidth:"calc(100% - 18px)",width:"calc(100% - 18px)",background:"transparent",border:"none",fontSize:26,paddingLeft:16,paddingTop:16,paddingBottom:16,borderTopLeftRadius:6,borderBottomLeftRadius:6,display:"block",height:"auto","&:focus":{outline:"none"},'& + [class^="todoAction-"]':{display:"block",position:"absolute",marginTop:-26,transition:"opacity 1s ease-in-out",opacity:1}},todoItem:{background:"white",boxShadow:"0px 2px 1px #bbb",display:"block",borderRadius:6,borderWidth:"1px 1px 0px 1px",borderStyle:"solid",borderColor:"#eee",marginBottom:16,minHeight:42,"&:last-child":{borderBottomWidth:"1px"},"&:focus":{outline:"none"}},todoAction:{opacity:0,transition:"opacity 1s ease-in-out",display:"none",width:"100px",marginLeft:6,"& > button":{width:"50%",background:"#eee",borderRadius:6,"&:focus":{outline:"none"}}}}}));!function(t){t.Enter="Enter"}(mt||(mt={}));var yt={save:w.request,remove:y.request,focus:j},xt=Object(f.c)((function(t){return{focused:t.todos.focusedId,removing:t.todos.removingId}}),yt)((function(t){var e=t.value,n=t.id,r=t.save,a=t.remove,o=t.focus,i=t.removing,c=t.focused,u=i===n,d=c===n,f=c===n,p=null;Object(s.useEffect)((function(){p&&(p.style.height||(p.style.height=p.scrollHeight+"px"),p.focus())}));var b=Object(s.useState)(""),O=Object(gt.a)(b,2),m=O[0],h=O[1],g=function(){p&&p.value&&(r({id:n,title:m||e}),h(""))},v=St(),E=function(t){"BUTTON"!==t.target.tagName&&(u||d||o(n))},j=function(t){return t.stopPropagation()},S=l.a.createElement("textarea",{ref:function(t){p=t},onKeyUp:function(t){switch(t.key){case mt.Enter:t.ctrlKey&&(t.preventDefault(),g());break;default:h(t.target.value)}},defaultValue:e,className:v.input}),y=l.a.createElement("pre",{className:v.title,onMouseDown:j},e),x=l.a.createElement("button",{onClick:function(t){a(n),o(-1)},onMouseDown:j},"Delete"),w=l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onClick:g},"Save"),x);return l.a.createElement("div",{className:v.todoItem,onClick:E,onFocus:E,tabIndex:0},f?S:y,l.a.createElement("div",{className:v.todoAction},f?w:""))})),wt={display:"block",position:"absolute",marginTop:-26,marginLeft:4},_t=Object(jt.a)((function(){return{formContainer:{width:"100%",marginBottom:24},textArea:{resize:"none",minWidth:"100%",maxWidth:"100%",width:"100%",border:"0px dotted #ccc",minHeight:50,height:"auto",overflow:"auto",borderRadius:6,padding:16,fontSize:26,paddingBottom:26,boxSizing:"border-box",boxShadow:"0px 2px 1px #bbb",opacity:".95","&:focus":{outline:"none"},'&:focus ~ [class^="actions-"]':wt},actions:{display:"none","&:hover":wt,"&:focus":{outline:"none"}}}})),At={onCreate:S.request},Tt=Object(f.c)((function(t){return{isLoading:t.todos.isLoading,todos:t.todos.todos}}),At)((function(t){var e,n=t.placeholder,r=void 0===n?"Write whatever you want to do...":n,a=t.onCreate,o=Object(s.useState)(""),i=Object(gt.a)(o,2),c=i[0],u=i[1],d=function(){u(""),e.innerText="",e.value=""},f=_t();return l.a.createElement("section",{className:f.formContainer},l.a.createElement("textarea",{className:f.textArea,ref:function(t){return e=t},onKeyUp:function(t){return u(t.target.value)},defaultValue:c,placeholder:r}),l.a.createElement("div",{className:f.actions},l.a.createElement("button",{onClick:function(){c&&a(c),d()}},"Save"),l.a.createElement("button",{onClick:d},"Cancel")))})),Dt=Object(jt.a)((function(){return{paginationContainer:{marginTop:24,"& > *":{marginRight:12}},paginationButtons:{"& > button":{background:"#eee",borderRadius:0,"&:focus":{outline:"none"}},"& > button:first-child":{},"& > button:last-child":{}}}})),kt=function(t){var e=t.total,n=t.limit,r=t.offset,a=(t.spread,t.onChange),o=void 0===a?new Function:a,i=Math.floor(e/n)+(e%n?1:0),c=Math.floor(r/n),u=Dt();return l.a.createElement("div",{className:u.paginationContainer},l.a.createElement("span",null,"Pages:"),l.a.createElement("span",{className:u.paginationButtons},l.a.createElement("button",{onClick:function(){o({offset:Math.max(r-n,0)})}},"Prev"),l.a.createElement("button",{onClick:function(){o({offset:Math.min(r+n,e-e%n)})}},"Next")),l.a.createElement("span",null,c+1," / ",i))},Ct=Object(jt.a)((function(t){var e=t.isLoading;return{todoListContainer:{width:"100%",maxWidth:600,background:"linear-gradient(159deg, #e1e4e7 0%, rgba(244,244,244,1) 50%, #e1e4e7 100%)",padding:12,borderRadius:6,boxShadow:"1px 1px 9px #eee",animation:e?"loadingBg 2s ease infinite":"none","& > *":{opacity:e?.75:void 0}},todoListItems:{padding:0,margin:0},todoListItemWrapper:{listStyle:"none",padding:0,margin:0}}}));function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var It={focus:j,fetch:x.request,push:Et.d},Rt=Object(f.c)((function(t){return{router:t.router,isLoading:t.todos.isLoading,todos:t.todos.todos}}),It)((function(t){var e=t.isLoading,n=t.todos,r=void 0===n?{}:n,a=t.fetch,o=t.router,i=t.push,c=t.focus,u=it.a.parse(o.location.search.replace("?","")),d=function(t){var e=it.a.stringify(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lt(n,!0).forEach((function(e){Object(vt.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u,{},t));i(o.location.pathname+"?"+e)};void 0!==u.filter&&void 0!==u.limit&&void 0!==u.offset||d({filter:"",offset:0,limit:10});var f=u.limit,p=u.offset,b=Object(s.useState)(""),O=Object(gt.a)(b,2),m=O[0],h=O[1];m!==o.location.search&&(h(o.location.search),a(o.location));var g=Ct({isLoading:e}),v=l.a.createElement("small",null,"You have nothing to do \ud83d\ude43");return l.a.createElement("section",{onClick:function(){c(-1)},className:g.todoListContainer+(e?" loading":"")},l.a.createElement(Tt,null),l.a.createElement("ul",{className:g.todoListItems,onClick:function(t){return t.stopPropagation()}},r.data.map((function(t){return l.a.createElement("li",{className:g.todoListItemWrapper,key:t.id},l.a.createElement(xt,{value:t.title,id:t.id}))})),0===r.total?v:""),l.a.createElement(kt,{limit:parseInt(f),offset:parseInt(p),total:r.total,onChange:function(t){var e=t.offset;d({offset:e})}}))})),Nt=n(122),Ut=n.n(Nt),Pt=function(){return s.createElement(p.a,{exact:!0,path:"/"},s.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"12px",backgroundImage:"url(".concat(Ut.a,")"),minHeight:"calc(100vh - 24px)"}},s.createElement(Rt,null)))};n(202);Object(d.render)(s.createElement((function(){return s.createElement(f.a,{store:ht},s.createElement(b.a,{history:dt},s.createElement(p.c,null,s.createElement(Pt,null))))}),null),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.8921097b.chunk.js.map